# Watcher CR

The Watcher CR configures Kyma Control Plane (KCP) setup and Runtime Watcher on Kyma runtimes. Read the document to see the the parameters the CR consists of.

## Runtime-Watcher Configuration

### **spec.resourceToWatch**

Defines the resources to watch by Runtime Watcher. By default, the **version** value is a wildcard (`*`) so an update is not required after the API version of a kind changes.

```yaml
spec:
  resourceToWatch:
    group: operator.kyma-project.io
    version: "*"
    resource: kymas
```

### **spec.labelsToWatch**
> **NOTE:** The resources you're watching need to have the `operator.kyma-project.io/watched-by` label. The label also informs where to route requests to.

The **spec.labelsToWatch** attribute is used to be able to filter the specified GVK in **spec.resourceToWatch**. For example, if the specified GVK is a `secret`, then it is useful to filter them by a specific label, otherwise the Runtime Watcher would send an event to the KCP for every CRUD event of any secret in the Kyma cluster.

```yaml
spec:
  labelsToWatch:
    "operator.kyma-project.io/watched-by": "lifecycle-manager"
    "example.label.to.watch": "true"
  resourceToWatch:
    group: ""
    version: "v1"
    resource: secrets
```


### **spec.field**
Can have eather the value `spec` or `status` to define if the Runtime-Watcher should send an event to the KCP if the spec of the specified GVK changes or when the status changes.

## KCP Configuration

### **spec.serviceInfo**
Specifies the name and namespace, as well as the port, the incoming events should be routed to.

```yaml
spec:
    name: klm-event-service
    namespace: kcp-system
    port: 8082
```


### **spec.gateway**
Defines the label selector of a Gateway to which the VirtualService should bind to.

```yaml
spec:
  gateway:
    selector:
      matchLabels:
        "operator.kyma-project.io/watcher-gateway": "default"
```

